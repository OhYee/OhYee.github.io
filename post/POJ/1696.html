<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>POJ 1696.Space Ant | OhYee&#39;s Blog | 随手记录一些东西</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#428bca">
    
    
    <meta name="keywords" content="计算几何,POJ,凸包">
    <meta name="description" content="题目点击显/隐题目 The most exciting space discovery occurred at the end of the 20th century. In 1999, scientists traced down an ant-like creature in the planet Y1999 and called it M11. It has only one eye on">
<meta name="keywords" content="计算几何,POJ,凸包">
<meta property="og:type" content="article">
<meta property="og:title" content="POJ 1696.Space Ant">
<meta property="og:url" content="https://www.oyohyee.com/post/POJ/1696.html">
<meta property="og:site_name" content="OhYee&#39;s Blog">
<meta property="og:description" content="题目点击显/隐题目 The most exciting space discovery occurred at the end of the 20th century. In 1999, scientists traced down an ant-like creature in the planet Y1999 and called it M11. It has only one eye on">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-09-20T10:37:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="POJ 1696.Space Ant">
<meta name="twitter:description" content="题目点击显/隐题目 The most exciting space discovery occurred at the end of the 20th century. In 1999, scientists traced down an ant-like creature in the planet Y1999 and called it M11. It has only one eye on">
    
        <link rel="alternate" type="application/atom+xml" title="OhYee&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.6.13">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
        
            <link href='/css/My.css' rel='stylesheet' type='text/css' />
        
            <script type='text/javascript' src='/js/My.js'></script>
        
            <script type='text/javascript' src='/js/digit.js'></script>
        
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/logo.svg" style="background-color: rgba(255,255,255,1)">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">OhYee</h5>
          <a href="mailto:oyohyee@oyohyee.com" title="oyohyee@oyohyee.com" class="mail">oyohyee@oyohyee.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                
                主页
                
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                
                归档
                
                  <span id="site.posts.length" class="digit"></span>
                
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                
                分类
                
                  <span id="site.categories.length" class="digit"></span>
                
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                
                标签
                
                  <span id="site.tags.length" class="digit"></span>
                
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/projects"  >
                <i class="icon icon-lg icon-OhYee"></i>
                
                我的项目
                
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/templates.html"  >
                <i class="icon icon-lg icon-code"></i>
                
                算法模板
                
              </a>
            </li>
        

      <ul class="nav2">
          
              <li class="waves-block waves-effect">
                <a href="/about"  title="关于" >
                  <i class="icon icon-lg icon-address-card address-card"></i>
                </a>
              </li>
          
              <li class="waves-block waves-effect">
                <a href="/gitment"  title="评论系统" >
                  <i class="icon icon-lg icon-commenting commenting"></i>
                </a>
              </li>
          
              <li class="waves-block waves-effect">
                <a href="http://wpa.qq.com/msgrd?v=3&uin=896817156&site=qq&menu=yes" target="_blank" title="QQ联系" >
                  <i class="icon icon-lg icon-qq qq"></i>
                </a>
              </li>
          
              <li class="waves-block waves-effect">
                <a href="https://github.com/OhYee" target="_blank" title="github" >
                  <i class="icon icon-lg icon-github github"></i>
                </a>
              </li>
          
        </ul>

      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">POJ 1696.Space Ant</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>

<!-- 占位 -->
<div class="holder" style="height:56px"></div>

<header class="content-header post-header" >

    <div class="container fade-scale">
        <h1 class="title">POJ 1696.Space Ant</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-09-13T16:42:00.000Z" itemprop="datePublished" class="page-time">
  2017-09-14 00:42:00
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Answer/">题解</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#题目"><span class="post-toc-text">题目</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#题解"><span class="post-toc-text">题解</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#代码"><span class="post-toc-text">代码</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-POJ/1696"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">POJ 1696.Space Ant</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-09-14 00:42:00 00:42:00" datetime="2017-09-13T16:42:00.000Z"  itemprop="datePublished">2017-09-14 00:42:00</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Answer/">题解</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><div class="fold_parent"><div class="fold_hider"><div class="close hider_title">点击显/隐题目</div></div><div class="fold">
<div class="oj"><div class="part" title="Description"><br>The most exciting space discovery occurred at the end of the 20th century. In 1999, scientists traced down an ant-like creature in the planet Y1999 and called it M11. It has only one eye on the left side of its head and just three feet all on the right side of its body and suffers from three walking limitations:<br><br>It can not turn right due to its special body structure.<br>It leaves a red path while walking.<br>It hates to pass over a previously red colored path, and never does that.<br><br>The pictures transmitted by the Discovery space ship depicts that plants in the Y1999 grow in special points on the planet. Analysis of several thousands of the pictures have resulted in discovering a magic coordinate system governing the grow points of the plants. In this coordinate system with x and y axes,<br>       no two plants share the same x or y.<br>An M11 needs to eat exactly one plant in each day to stay alive. When it eats one plant, it remains there for the rest of the day with no move. Next day, it looks for another plant to go there and eat it. If it can not reach any other plant it dies by the end of the day. Notice that it can reach a plant in any distance.<br>The problem is to find a path for an M11 to let it live longest.<br>Input is a set of (x, y) coordinates of plants. Suppose A with the coordinates (xA, yA) is the plant with the least y-coordinate. M11 starts from point (0,yA) heading towards plant A. Notice that the solution path should not cross itself and all of the turns should be counter-clockwise. Also note that the solution may visit more than two plants located on a same straight line.<br><br></div><div class="part" title="Input"><br>The first line of the input is M, the number of test cases to be solved (1 &lt;= M &lt;= 10). For each test case, the first line is N, the number of plants in that test case (1 &lt;= N &lt;= 50), followed by N lines for each plant data. Each plant data consists of three integers: the first number is the unique plant index (1..N), followed by two positive integers x and y representing the coordinates of the plant. Plants are sorted by the increasing order on their indices in the input file. Suppose that the values of coordinates are at most 100.<br><br></div><div class="part" title="Output"><br>Output should have one separate line for the solution of each test case. A solution is the number of plants on the solution path, followed by the indices of visiting plants in the path in the order of their visits.<br><br></div><div class="samp"><div class="clear"></div><div class="input part" title="Sample Input"><br>2<br>10<br>1 4 5<br>2 9 8<br>3 5 9<br>4 1 7<br>5 3 2<br>6 6 3<br>7 10 10<br>8 8 1<br>9 2 4<br>10 7 6<br>14<br>1 6 11<br>2 11 9<br>3 8 7<br>4 12 8<br>5 9 20<br>6 3 2<br>7 1 6<br>8 2 13<br>9 15 1<br>10 14 17<br>11 13 19<br>12 5 18<br>13 7 3<br>14 10 16<br><br></div><div class="output part" title="Sample Output"><br>10 8 7 3 4 9 5 6 2 1 10<br>14 9 10 11 5 12 8 7 6 13 4 14 1 3 2<br><br></div><div class="clear"></div></div></div>
</div></div>
<a id="more"></a>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><blockquote>
<p>对一个只能向左转的蚂蚁,求它尽可能经过最多点的路径  </p>
</blockquote>
<p>容易画出来蚂蚁必然能通过所有点  </p>
<p>本质上就是将整个散点图分成一层层凸包  </p>
<p>需要特别注意除了最外层凸包,里面的凸包起点要由上一层凸包决定  </p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><div class="fold_parent"><div class="fold_hider"><div class="close hider_title">点击显/隐代码</div></div><div class="fold">
<figure class="highlight cpp"><figcaption><span>Space Ant</span><a href="https://github.com/OhYee/sourcecode/tree/master/ACM">代码备份</a></figcaption><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;complex&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> Log(format, ...) <span class="comment">// printf(format, ##__VA_ARGS__)</span></span></div><div class="line"></div><div class="line"><span class="comment">/* 计算几何模板 */</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-8</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">double</span> INF = <span class="number">9e50</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sgn</span><span class="params">(<span class="keyword">const</span> <span class="keyword">double</span> &amp;x)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(x) &lt; eps)</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> x &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Vector</span> &#123;</span></div><div class="line">    <span class="keyword">double</span> x, y;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    Vector(<span class="keyword">double</span> _x = <span class="number">0</span>, <span class="keyword">double</span> _y = <span class="number">0</span>, <span class="keyword">int</span> _n = <span class="number">0</span>) : x(_x), y(_y), n(_n) &#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Vector &amp;rhs) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> sgn(x - rhs.x) == <span class="number">0</span> &amp;&amp; sgn(y - rhs.y) == <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>!=(<span class="keyword">const</span> Vector &amp;rhs) <span class="keyword">const</span> &#123; <span class="keyword">return</span> !(*<span class="keyword">this</span> == rhs); &#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Vector &amp;rhs) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">if</span> (sgn(y - rhs.y) == <span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> sgn(x - rhs.x) &lt; <span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> sgn(y - rhs.y) &lt; <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    Vector <span class="keyword">operator</span>+(<span class="keyword">const</span> Vector &amp;rhs) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Vector(x + rhs.x, y + rhs.y);</div><div class="line">    &#125;</div><div class="line">    Vector <span class="keyword">operator</span>-(<span class="keyword">const</span> Vector &amp;rhs) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Vector(x - rhs.x, y - rhs.y);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">squre</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> x * x + y * y; &#125;</div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">distance</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">sqrt</span>(squre()); &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">bool</span> flag = <span class="number">0</span>)</span> <span class="keyword">const</span> </span>&#123;</div><div class="line">        Log(<span class="string">"(%.f %.f)"</span>, x, y);</div><div class="line">        <span class="keyword">if</span> (flag)</div><div class="line">            Log(<span class="string">"\n"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">typedef</span> Vector Point;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Segment</span> &#123;</span></div><div class="line">    Point a, b;</div><div class="line">    Segment() &#123;&#125;</div><div class="line">    Segment(Point _a, Point _b) : a(_a), b(_b) &#123;&#125;</div><div class="line">    <span class="function">Vector <span class="title">toVector</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> b - a; &#125;</div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">distance</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> (b - a).distance(); &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">bool</span> flag = <span class="number">0</span>)</span> <span class="keyword">const</span> </span>&#123;</div><div class="line">        a.print();</div><div class="line">        Log(<span class="string">" -&gt; "</span>);</div><div class="line">        b.print();</div><div class="line">        <span class="keyword">if</span> (flag)</div><div class="line">            Log(<span class="string">"\n"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 读入一个点的坐标</span></div><div class="line"><span class="comment">    * @return   读入的点</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">inline</span> Point <span class="title">read_Point</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> x, y;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;x, &amp;y);</div><div class="line">    <span class="keyword">return</span> Point(x, y);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 计算两个向量的叉积</span></div><div class="line"><span class="comment">    * @param a  向量1</span></div><div class="line"><span class="comment">    * @param b  向量2</span></div><div class="line"><span class="comment">    * @return   叉积</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">Cross</span><span class="params">(<span class="keyword">const</span> Vector &amp;a, <span class="keyword">const</span> Vector &amp;b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.y - a.y * b.x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 计算两个向量的点积</span></div><div class="line"><span class="comment">    * @param a  向量1</span></div><div class="line"><span class="comment">    * @param b  向量2</span></div><div class="line"><span class="comment">    * @return   点积</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">Dot</span><span class="params">(<span class="keyword">const</span> Vector &amp;a, <span class="keyword">const</span> Vector &amp;b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.x + a.y * b.y;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 计算两点之间的距离</span></div><div class="line"><span class="comment">    * @param a  线段L1</span></div><div class="line"><span class="comment">    * @param b  线段L2</span></div><div class="line"><span class="comment">    * @return   两点间的距离</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">Distance</span><span class="params">(<span class="keyword">const</span> Point &amp;a, <span class="keyword">const</span> Point &amp;b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a - b).distance();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 点和直线的关系</span></div><div class="line"><span class="comment">    * @param p   目标点</span></div><div class="line"><span class="comment">    * @param L   目标直线</span></div><div class="line"><span class="comment">    * @return    1 在左侧,0 在直线上,-1在右侧</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Point_Segment</span><span class="params">(<span class="keyword">const</span> Vector &amp;p, <span class="keyword">const</span> Segment &amp;L)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> sgn(Cross(L.b - L.a, p - L.a));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 计算两个线段的位置关系</span></div><div class="line"><span class="comment">    * @param L1 线段L1</span></div><div class="line"><span class="comment">    * @param L2 线段L2</span></div><div class="line"><span class="comment">    * @param p  返回交点坐标</span></div><div class="line"><span class="comment">    * @return   2   重叠</span></div><div class="line"><span class="comment">                1   相交</span></div><div class="line"><span class="comment">                0   延长线相交</span></div><div class="line"><span class="comment">                -1  平行</span></div><div class="line"><span class="comment">                -2  共线不交</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Segment_Segment</span><span class="params">(<span class="keyword">const</span> Segment L1, <span class="keyword">const</span> Segment L2,</span></span></div><div class="line"><span class="function"><span class="params">                           Point *p = <span class="literal">NULL</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> a = L1.b.x - L1.a.x;</div><div class="line">    <span class="keyword">double</span> b = L2.b.x - L2.a.x;</div><div class="line">    <span class="keyword">double</span> c = L1.b.y - L1.a.y;</div><div class="line">    <span class="keyword">double</span> d = L2.b.y - L2.a.y;</div><div class="line">    <span class="keyword">double</span> f = a * d - b * c;</div><div class="line">    <span class="comment">// 平行或重叠</span></div><div class="line">    <span class="keyword">if</span> (sgn(f) == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (Point_Segment(L1.a, L2)) &#123;</div><div class="line">            <span class="comment">// 平行</span></div><div class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// 共线</span></div><div class="line">            <span class="keyword">int</span> len = max(max(Distance(L1.a, L2.a), Distance(L1.a, L2.b)),</div><div class="line">                          max(Distance(L1.b, L2.a), Distance(L1.b, L2.b)));</div><div class="line">            <span class="keyword">if</span> (sgn(len - L1.distance() - L2.distance()) &gt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="comment">// 共线不交</span></div><div class="line">                <span class="keyword">return</span> <span class="number">-2</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// 重叠</span></div><div class="line">                <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">double</span> g = L2.b.x - L1.a.x;</div><div class="line">    <span class="keyword">double</span> h = L2.b.y - L1.a.y;</div><div class="line">    <span class="keyword">double</span> t = (d * g - b * h) / f;</div><div class="line">    <span class="keyword">double</span> s = (-c * g + a * h) / f;</div><div class="line">    <span class="keyword">if</span> (p != <span class="literal">NULL</span>)</div><div class="line">        *p = Point(L1.a.x + t * a, L1.a.y + t * c);</div><div class="line">    <span class="comment">// 在延长线上</span></div><div class="line">    <span class="keyword">if</span> (t &lt; <span class="number">0</span> || t &gt; <span class="number">1</span> || s &lt; <span class="number">0</span> || s &gt; <span class="number">1</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="comment">// 线段相交</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 判断点是否在多边形内部</span></div><div class="line"><span class="comment">    * @param p              需要判断的点</span></div><div class="line"><span class="comment">    * @param polygon        多边形点集,需要保证有序</span></div><div class="line"><span class="comment">    * @param numberOfSide   多边形边数</span></div><div class="line"><span class="comment">    * @return   true 点在多边形内,false 点不在多边形内</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Point_Polygon</span><span class="params">(Point p, Point polygon[], <span class="keyword">int</span> numberOfSide)</span> </span>&#123;</div><div class="line">    <span class="keyword">bool</span> ok =</div><div class="line">        Point_Segment(p, Segment(polygon[numberOfSide - <span class="number">1</span>], polygon[<span class="number">0</span>])) &gt;= <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; numberOfSide &amp;&amp; ok; ++i) &#123;</div><div class="line">        <span class="keyword">if</span> (!(Point_Segment(p, Segment(polygon[i - <span class="number">1</span>], polygon[i])) &gt;= <span class="number">0</span>))</div><div class="line">            ok = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ok;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">    * 求点集的凸包</span></div><div class="line"><span class="comment">    * @param p              点集,需要保证已经排序</span></div><div class="line"><span class="comment">    * @param numOfPoint     点集内的点的个数</span></div><div class="line"><span class="comment">    * @param vis            记录点对应的编号是否可以选择</span></div><div class="line"><span class="comment">    * @param ans            返回的凸包</span></div><div class="line"><span class="comment">    * @param begin          起始位置</span></div><div class="line"><span class="comment">    * @return   返回凸包上点的个数</span></div><div class="line"><span class="comment">    */</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Convex_Hull</span><span class="params">(Point p[], <span class="keyword">int</span> numOfPoint, <span class="keyword">bool</span> vis[], Point ans[],</span></span></div><div class="line"><span class="function"><span class="params">                <span class="keyword">int</span> begin = <span class="number">0</span>)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> pos = begin - <span class="number">1</span>;</div><div class="line">    <span class="comment">// 右链</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numOfPoint; ++i) &#123;</div><div class="line">        <span class="keyword">if</span> (!vis[p[i].n]) &#123;</div><div class="line">            <span class="keyword">while</span> (pos &gt; <span class="number">0</span> &amp;&amp;</div><div class="line">                   Point_Segment(p[i], Segment(ans[pos], ans[pos - <span class="number">1</span>])) &gt; <span class="number">0</span>) &#123;</div><div class="line">                vis[ans[pos--].n] = <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            ans[++pos] = p[i];</div><div class="line">            vis[ans[pos].n] = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 左链</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = numOfPoint - <span class="number">2</span>; i &gt; <span class="number">0</span>; --i) &#123;</div><div class="line">        <span class="keyword">if</span> (!vis[p[i].n]) &#123;</div><div class="line">            <span class="keyword">while</span> (pos &gt; <span class="number">0</span> &amp;&amp;</div><div class="line">                   Point_Segment(p[i], Segment(ans[pos], ans[pos - <span class="number">1</span>])) &gt; <span class="number">0</span>) &#123;</div><div class="line">                vis[ans[pos--].n] = <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            ans[++pos] = p[i];</div><div class="line">            vis[ans[pos].n] = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> pos + <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">105</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n;</div><div class="line">Point points[maxn];</div><div class="line">Point ans[maxn];</div><div class="line"><span class="keyword">bool</span> vis[maxn];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">    sort(points, points + n);</div><div class="line">    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, (n + <span class="number">5</span>) * <span class="keyword">sizeof</span>(<span class="keyword">bool</span>));</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (len != n) &#123;</div><div class="line">        len = Convex_Hull(points, n, vis, ans, len);</div><div class="line">        Log(<span class="string">"%d\n"</span>, len);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, len);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">" %d"</span>, ans[i].n);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</div><div class="line">            <span class="keyword">int</span> t;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</div><div class="line">            points[i] = read_Point();</div><div class="line">            points[i].n = t;</div><div class="line">        &#125;</div><div class="line">        solve();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

</div></div>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        

        
        文章标题：  <a href="/post/POJ/1696.html" target="_blank" rel="external">POJ 1696.Space Ant</a><br>文章地址：  <a href="/post/POJ/1696.html" target="_blank" rel="external">https://www.oyohyee.com/post/POJ/1696.html</a><br>创建时间：  2017-09-14 00:42:00<br>更新时间：  2017-09-20 18:37:02
        
    </div>
    <footer>
        <a href="https://www.oyohyee.com">
            <img src="/logo.svg" alt="OhYee">
            OhYee
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/POJ/">POJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Convex-Hull/">凸包</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/geometry/">计算几何</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://www.oyohyee.com/post/POJ/1696.html&title=《POJ 1696.Space Ant》 — OhYee's Blog&pic=https://www.oyohyee.com/logo.svg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.oyohyee.com/post/POJ/1696.html&title=《POJ 1696.Space Ant》 — OhYee's Blog&source=题目点击显/隐题目
The most exciting space discovery occurred at the end of the 20th c..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://www.oyohyee.com/post/POJ/1696.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《POJ 1696.Space Ant》 — OhYee's Blog&url=https://www.oyohyee.com/post/POJ/1696.html&via=https://www.oyohyee.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://www.oyohyee.com/post/POJ/1696.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/post/HDU/6206.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">HDU 6206.Apple</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/post/POJ/1410.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">POJ 1410.Intersection</h4>
      </a>
    </div>
  
</nav>



    











<section class="comments" id="comments">
    <div id="gitment_thread"></div>
    <link rel="stylesheet" href="/css/gitment.css">
    <script src="/js/gitment.js"></script>
    <script>
        var gitment = new Gitment({
            id: "Gitment",
            owner: 'OhYee',
            repo: 'OhYee.github.io',
            oauth: {
                client_id: '300bdf519730fd67e69c',
                client_secret: '9a496df1c4da10cec1ec233379b9b3ef6a448c2e',
            },
        })
        gitment.render('comments')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/wechatimg.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/wechatimg.jpg" data-alipay="/alipayimg.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
                
                    

<span id="busuanzi_container_site_uv" style='display:none'>
    站点总访客数：<span id="busuanzi_value_site_uv"></span>
</span>
<span id="busuanzi_container_site_pv" style='display:none'>
    站点总访问量：<span id="busuanzi_value_site_pv"></span>
</span>



                        <!--<span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>-->
        </p>
        <p>
            <span>
                <a href="https://www.oyohyee.com">OhYee</a> &copy; 2016 - 2017</span>
            <span>
                
                <a href="http://www.miitbeian.gov.cn/" target="_blank">豫ICP备17000379号</a>
                
            </span>
            <span>
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="/projects/indigo/" target="_blank">indigo</a>
            </span>
        </p>
    </div>
    <div class="bottom">
        <div class="friends">
            <p>
                
                    <span>
                        <a href="http://hakale.cn/">
                            Hakale
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/acblacktea">
                            ACBlackTea
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/snow_me">
                            Wilbert
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/adjky/">
                            ADjky
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/JACK_JYH/">
                            JACK_JYH
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/qq_35323001">
                            Super丶xd
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/pengwill97">
                            Pengwill
                        </a>
                    </span>
                
                    <span>
                        <a href="http://blog.csdn.net/Mr_Saltyfish">
                            Mr_Saltyfish
                        </a>
                    </span>
                
                    <span>
                        <a href="http://www.cnblogs.com/wmrv587/">
                            wmr
                        </a>
                    </span>
                
                    <span>
                        <a href="http://www.cnblogs.com/robin1998/">
                            Robin
                        </a>
                    </span>
                
            </p>
        </div>
    </div>
</footer>
    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://www.oyohyee.com/post/POJ/1696.html&title=《POJ 1696.Space Ant》 — OhYee's Blog&pic=https://www.oyohyee.com/logo.svg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.oyohyee.com/post/POJ/1696.html&title=《POJ 1696.Space Ant》 — OhYee's Blog&source=题目点击显/隐题目
The most exciting space discovery occurred at the end of the 20th c..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://www.oyohyee.com/post/POJ/1696.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《POJ 1696.Space Ant》 — OhYee's Blog&url=https://www.oyohyee.com/post/POJ/1696.html&via=https://www.oyohyee.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://www.oyohyee.com/post/POJ/1696.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://www.oyohyee.com/post/POJ/1696.html" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.13"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.13" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
